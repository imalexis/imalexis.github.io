"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6594],{9631:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var t=s(5893),l=s(1151),a=s(3691);const o={},i=void 0,r={permalink:"/blog/2024/01/06/react-suspense",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2024-01-06-react-suspense.mdx",source:"@site/blog/2024-01-06-react-suspense.mdx",title:"react-suspense",description:"---",date:"2024-01-06T00:00:00.000Z",formattedDate:"January 6, 2024",tags:[],readingTime:2.075,hasTruncateMarker:!0,authors:[],frontMatter:{},unlisted:!1,nextItem:{title:"Fragments",permalink:"/blog/relay-fragment"}},c={authorsImageUrls:[]},d=[{value:"tags: [React]",id:"tags-react",level:2},{value:"Purpose",id:"purpose",level:2},{value:"Common usage",id:"common-usage",level:2},{value:"Displaying a fallback while content is loading",id:"displaying-a-fallback-while-content-is-loading",level:3},{value:"Revealing content together at once",id:"revealing-content-together-at-once",level:3},{value:"Revealing nested content as it loads",id:"revealing-nested-content-as-it-loads",level:3},{value:"More usage see at react &lt;Suspense&gt;",id:"more-usage-see-at-react-suspense",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"slug: react-suspense\ntitle:  react Suspense"}),"\n",(0,t.jsx)(n.h2,{id:"tags-react",children:"tags: [React]"}),"\n",(0,t.jsx)(n.h1,{id:"suspense",children:"<Suspense>"}),"\n",(0,t.jsxs)(n.p,{children:["<Suspense> component is part of ",(0,t.jsx)(n.em,{children:"React's"})," Concurrent Mode feature to improve the user experience by making it more respective and resilient."]}),"\n",(0,t.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,t.jsx)(n.p,{children:'The primary purpose of the <Suspense> component is to handle asynchronous operations, such as data fetching or lazy loading of components, in a more declarative way. It allows you to "suspend" rendering until some condition is met, typically until data is ready.'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"import React, { Suspense } from 'react';\n\nconst MyComponent = React.lazy(() => import('./MyComponent'));\n\nfunction App() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <MyComponent />\n    </Suspense>\n  );\n}\n\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(a.Z,{style:"color: #25c2a0",children:"Note"}),":"]}),"\n",(0,t.jsxs)(n.p,{children:["When you are using Relay's ",(0,t.jsx)(a.Z,{style:"color: #277B9F",children:"useLazyQuery"})," , the official document recommend wrap it with a ",(0,t.jsx)(a.Z,{style:"color: #277B9F",children:"Suspense"})," Component for better user experience."]}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"common-usage",children:"Common usage"}),"\n",(0,t.jsx)(n.h3,{id:"displaying-a-fallback-while-content-is-loading",children:"Displaying a fallback while content is loading"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"<Suspense fallback={<Loading />}>\n  <Albums />\n</Suspense>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["React will display ",(0,t.jsx)(a.Z,{color:"#E6F8FF",children:"loading fallback"}),"\nuntil all the code and data needed by the children has been loaded."]}),"\n",(0,t.jsxs)(n.p,{children:["Only Suspense-enable data sources will activate the ",(0,t.jsx)(a.Z,{color:" #E6F8FF",children:"Suspense component"}),"."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Data fetching with Suspense-enabled frameworks like ",(0,t.jsx)(a.Z,{color:"#277B9F",children:"Relay"})," and ",(0,t.jsx)(a.Z,{color:"#277B9F",children:"Next.js"}),", such as ",(0,t.jsx)(a.Z,{color:"#FDF2EA",children:"useLazyQuery"})," in ",(0,t.jsx)(a.Z,{color:"#277B9F",children:"Relay"})]}),"\n",(0,t.jsxs)(n.li,{children:["Lazy-loading component code with ",(0,t.jsx)(a.Z,{color:"#277B9F",children:"lazy"})]}),"\n",(0,t.jsxs)(n.li,{children:["Reading the value of a Promise with ",(0,t.jsx)(a.Z,{color:"#277B9F",children:"use"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"revealing-content-together-at-once",children:"Revealing content together at once"}),"\n",(0,t.jsx)(n.p,{children:"By default, the whole tree inside Suspense is treated as a single unit. Only all components inside the Suspense have been ready for rendering, all of those components will appear at once. Otherwise, even if only one of these components suspends waiting for some data, all of them together will be replaced by the loading indicator."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Alt text",src:s(1335).Z+"",width:"1698",height:"326"})}),"\n",(0,t.jsx)(n.h3,{id:"revealing-nested-content-as-it-loads",children:"Revealing nested content as it loads"}),"\n",(0,t.jsx)(n.p,{children:"Each Suspense boundary's fallback will be filled in as the next level of content becomes available."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Alt text",src:s(8754).Z+"",width:"1710",height:"442"})}),"\n",(0,t.jsxs)(n.p,{children:["With this change, displaying the ",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"Biography"}),' doesn\'t need to "wait" for the ',(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"Albums"})," to load."]}),"\n",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"AlbumsGlimmer"}),"\n",(0,t.jsx)(n.p,{children:"Let's break it down with proper sequence:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"Biography"})," hasn't loaded yet, ",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"BigSpinner"})," is shown in place of the entire content area."]}),"\n",(0,t.jsxs)(n.li,{children:["Once the ",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"Biography"})," finishes loadingm ",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"BigSpinner"})," is replaced by the content."]}),"\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"Albums"})," hasn't loaded yet, ",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"AlbumsGlimmer"})," id shown in place of ",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"Albums"})," and its parent Panel."]}),"\n",(0,t.jsxs)(n.li,{children:["Finally, once ",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"Albums"})," finishes loading, it replaces ",(0,t.jsx)(a.Z,{color:"#F6F7F9",children:"AlbumsGlimmer"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"more-usage-see-at-react-suspense",children:["More usage see at ",(0,t.jsx)(n.a,{href:"https://react.dev/reference/react/Suspense",children:"react <Suspense>"})]})]})}function p(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},3691:(e,n,s)=>{s.d(n,{Z:()=>l});var t=s(5893);const l=e=>{let{children:n,color:s}=e;return(0,t.jsx)("span",{style:{backgroundColor:"#2C6F63",borderRadius:"2px",border:"1px solid black",color:"#fff",padding:"0.2rem"},children:n})}},8754:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/image-1-86919027ee5d9a0b36f0fcf501dc2d3f.png"},1335:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/image-d8f1ab47a015ccd1ae121ab782b76520.png"},1151:(e,n,s)=>{s.d(n,{Z:()=>i,a:()=>o});var t=s(7294);const l={},a=t.createContext(l);function o(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);